# 大数据查询平台系统使用手册

## 📋 目录

- [1. 系统概述](#1-系统概述)
- [2. 技术架构](#2-技术架构)
- [3. 前端用户使用指南](#3-前端用户使用指南)
- [4. 管理后台使用指南](#4-管理后台使用指南)
- [5. 代理后台使用指南](#5-代理后台使用指南)
- [6. 支付流程说明](#6-支付流程说明)
- [7. 常见问题解答](#7-常见问题解答)
- [8. 技术支持](#8-技术支持)

---

## 1. 系统概述

### 1.1 平台介绍
大数据查询平台是一个集成多种数据查询服务的综合性平台，支持个人和企业用户进行风险数据查询、身份验证等服务。平台采用多角色权限管理，包含普通用户、代理用户和超级管理员三种角色。

### 1.2 核心功能
- **数据查询服务**：二要素、三要素、人脸识别等多种查询类型
- **多支付方式**：支持微信支付和支付宝支付
- **代理分销系统**：支持代理用户注册、佣金结算、提现申请
- **订单管理**：完整的订单流程管理和查询历史
- **移动端适配**：响应式设计，完美支持手机和电脑访问

### 1.3 用户角色

| 角色 | 权限范围 | 主要功能 |
|------|----------|----------|
| **普通用户** | 查询服务使用 | 注册登录、数据查询、订单管理 |
| **代理用户** | 推广分销 | 用户推广、佣金管理、系统设置、提现申请 |
| **超级管理员** | 系统管理 | 用户管理、系统配置、财务管理、代理审核 |

---

## 2. 技术架构

### 2.1 后端技术栈
- **框架**: Django 4.0.1
- **数据库**: MySQL 8.0
- **支付接口**: 微信支付 + 支付宝支付
- **短信服务**: 阿里云短信
- **认证方式**: Session + 微信OAuth
- **API设计**: RESTful API

### 2.2 前端技术栈
- **框架**: Nuxt.js 3.17.6 + Vue.js 3.5.17
- **UI库**: Tailwind CSS 6.14.0
- **图标库**: Nuxt Icon 1.15.0
- **图表库**: Chart.js 4.5.0
- **构建模式**: SPA (Single Page Application)

### 2.3 系统架构特点
- **跨域支持**: 完整的CORS配置
- **域名代理**: 支持多域名代理访问
- **安全防护**: 密码加密、登录锁定、SQL注入防护
- **数据加密**: 敏感信息加密存储
- **实时查询**: 支付状态实时查询和订单状态同步

---

## 3. 前端用户使用指南

### 3.1 访问与登录

#### 3.1.1 访问方式
- **推荐**: 通过微信浏览器访问（支持微信一键登录）
- **备选**: 通过普通浏览器访问（需要手机号登录）

#### 3.1.2 登录流程

**微信登录**（推荐）：
1. 在微信中打开平台链接
2. 系统自动获取微信用户信息
3. 首次访问自动创建账户
4. 后续访问自动登录

**手机号登录**：
1. 点击"立即登录"按钮
2. 输入手机号码
3. 点击"获取验证码"
4. 输入收到的6位验证码
5. 勾选同意服务协议
6. 点击"登录"完成

### 3.2 首页功能

#### 3.2.1 查询服务
**个人查询**：
- 输入姓名和身份证号
- 根据配置可能需要输入手机号
- 选择需要查询的数据类型
- 同意相关授权协议
- 点击"立即查询"

**企业查询**：
- 输入企业名称
- 输入统一社会信用代码
- 选择查询项目
- 确认企业合规承诺
- 提交查询申请

#### 3.2.2 协议查看
系统提供多种协议供用户查看：
- 用户服务协议
- 隐私政策
- 免责声明
- 数据查询授权书
- 企业合规承诺书

### 3.3 个人中心

#### 3.3.1 主要功能
- **订单记录**: 查看所有查询订单和支付状态
- **历史报告**: 浏览已完成的查询报告
- **申请代理**: 申请成为平台代理用户
- **联系客服**: 快速联系客服解决问题
- **账户设置**: 查看个人信息和注销账户

#### 3.3.2 订单管理
用户可以在订单记录中查看：
- 订单状态（待支付/已支付/查询中/已完成）
- 查询类型和金额
- 创建时间和支付时间
- 订单详情和查询结果

### 3.4 投诉与客服

在页面右下角提供投诉悬浮按钮：
- 蓝色渐变设计，温和友好
- 点击直接跳转客服链接
- 支持用户反馈和投诉建议

---

## 4. 管理后台使用指南

### 4.1 登录访问

#### 4.1.1 访问地址
```
https://您的域名/a8f2c9e7d4b6f1a5c3e8d9f2b7a4c6e1/
```

#### 4.1.2 登录流程
1. 输入管理员用户名
2. 输入密码
3. 完成图形验证码验证
4. 点击登录

#### 4.1.3 安全机制
- 5次密码错误后锁定账户30分钟
- Session有效期7天
- 强制HTTPS访问

### 4.2 仪表盘

#### 4.2.1 数据统计
- **用户统计**: 总用户数、今日新增、代理用户数
- **订单统计**: 总订单数、今日订单、成功率
- **财务统计**: 总收入、今日收入、代理佣金
- **系统统计**: 查询成功率、API调用量

#### 4.2.2 图表分析
- **用户来源分布**: 饼图显示直接访问和代理推广比例
- **查询类型分布**: 展示不同查询类型的使用情况
- **订单状态分析**: 订单状态分布统计
- **收入趋势**: 近7天收入趋势图

### 4.3 用户管理

#### 4.3.1 普通用户管理
- **用户列表**: 查看所有注册用户
- **用户详情**: 查看用户基本信息和消费记录
- **用户搜索**: 支持按用户名、手机号搜索
- **状态管理**: 查看用户注销状态

#### 4.3.2 代理用户管理
- **代理列表**: 查看所有代理用户
- **创建代理**: 手动创建新代理账户
- **编辑代理**: 修改代理信息和权限
- **删除代理**: 删除代理账户
- **详情查看**: 查看代理详细信息和业绩

#### 4.3.3 代理申请管理
- **申请列表**: 查看所有代理申请
- **审核处理**: 批准或拒绝代理申请
- **申请详情**: 查看申请人详细信息
- **状态跟踪**: 跟踪申请处理状态

#### 4.3.4 佣金提现管理
- **提现申请列表**: 查看所有代理提现申请
- **申请处理**: 批准或拒绝提现申请
- **详情查看**: 包含申请信息、代理信息、收款信息三个标签页
- **状态管理**: 跟踪提现处理状态和到账情况

### 4.4 系统配置

#### 4.4.1 网站基础设置
- **网站标题**: 设置网站名称和标题
- **网站描述**: SEO描述信息
- **网站关键词**: SEO关键词
- **网站Logo**: 上传网站Logo图片
- **客服链接**: 设置客服联系方式
- **微信访问限制**: 是否强制微信内访问

#### 4.4.2 查询配置管理
- **个人查询配置**: 设置个人查询价格和API组合
- **企业查询配置**: 设置企业查询价格和API组合
- **手机号设置**: 是否需要输入手机号
- **短信验证**: 是否需要短信验证码

#### 4.4.3 外部API配置
支持配置多种第三方服务：
- **天远风险查询**: 风险数据API配置
- **阿里云短信**: 短信服务配置
- **微信公众号**: OAuth登录配置
- **支付宝支付**: 支付接口配置
- **微信支付**: 微信支付配置

#### 4.4.4 支付配置
- **支付宝配置**: App ID、私钥、公钥配置
- **微信支付配置**: App ID、商户号、密钥配置
- **支付方式开关**: 启用/禁用特定支付方式

### 4.5 业务管理

#### 4.5.1 授权书管理
- **生成授权书**: 为用户生成数据查询授权书
- **授权书列表**: 查看所有生成的授权书
- **模板管理**: 管理授权书模板

#### 4.5.2 查询记录管理
- **查询历史**: 查看所有用户查询记录
- **结果查看**: 查看查询结果详情
- **数据导出**: 导出查询数据报表

#### 4.5.3 订单管理
- **订单列表**: 查看所有订单信息
- **订单搜索**: 按订单号、用户搜索
- **状态管理**: 查看和更新订单状态
- **退款处理**: 处理用户退款申请
- **财务报表**: 生成订单财务报表

### 4.6 退款功能

#### 4.6.1 退款流程
1. 在订单管理中找到需要退款的订单
2. 点击"退款"按钮
3. 确认退款金额和原因
4. 系统自动调用支付接口处理退款
5. 自动扣减相关代理佣金
6. 更新订单状态为"已退款"

#### 4.6.2 退款特点
- **即时退款**: 支付宝立即到账，微信1-3个工作日
- **自动扣佣**: 退款时自动扣减代理未结算佣金
- **状态同步**: 实时查询退款状态并更新数据库

---

## 5. 代理后台使用指南

### 5.1 登录访问

#### 5.1.1 访问地址
```
https://您的域名/agent/
```

#### 5.1.2 登录流程
1. 输入代理用户名和密码
2. 完成验证码验证
3. 点击登录进入代理后台

### 5.2 仪表盘

#### 5.2.1 数据概览
- **佣金统计**: 累计佣金、未结算佣金、已结算佣金
- **用户统计**: 推广用户数、今日新增用户
- **订单统计**: 总订单数、今日订单数、成功订单数
- **收益图表**: 近7天佣金趋势图

#### 5.2.2 快捷操作
- **佣金明细**: 快速查看佣金详情
- **申请提现**: 一键申请佣金提现
- **推广链接**: 获取专属推广链接

### 5.3 业务管理

#### 5.3.1 佣金明细
- **佣金概览**: 显示累计佣金、未结算佣金等数据
- **收款设置**: 配置支付宝或微信收款账户
- **申请提现**: 提交佣金提现申请
- **提现记录**: 查看历史提现记录和状态

#### 5.3.2 订单记录
- **订单列表**: 查看通过代理链接产生的所有订单
- **订单筛选**: 按状态、时间筛选订单
- **佣金明细**: 查看每笔订单的佣金收益
- **数据导出**: 导出订单数据用于对账

### 5.4 系统设置

#### 5.4.1 网站配置（如有权限）
- **网站信息**: 修改网站标题、描述等
- **Logo设置**: 上传自定义Logo
- **客服配置**: 设置客服联系方式

#### 5.4.2 查询配置（如有权限）
- **价格设置**: 设置查询服务价格
- **API配置**: 配置查询接口参数
- **功能开关**: 启用/禁用特定功能

### 5.5 佣金结算系统

#### 5.5.1 收款配置
代理用户需要先配置收款账户：
- **支付宝收款**: 输入支付宝账号和真实姓名
- **微信收款**: 输入微信号和真实姓名
- **账户验证**: 确保收款信息准确无误

#### 5.5.2 提现申请
1. 点击"申请提现"按钮
2. 选择提现方式（支付宝/微信）
3. 输入提现金额（不超过可提现佣金）
4. 填写提现原因说明
5. 确认提交申请

#### 5.5.3 提现记录
- **申请状态**: 待审核、审核通过、审核拒绝、已到账
- **处理时间**: 查看申请时间和处理时间
- **金额明细**: 提现金额和手续费
- **备注信息**: 查看管理员处理备注

---

## 6. 支付流程说明

### 6.1 支付方式

#### 6.1.1 微信支付
- **适用场景**: 微信浏览器内访问
- **支付特点**: 调用微信JSAPI，无需跳转
- **到账时间**: 实时到账
- **退款时间**: 1-3个工作日

#### 6.1.2 支付宝支付
- **适用场景**: 所有浏览器
- **支付特点**: 
  - 手机端：调用支付宝APP支付
  - 电脑端：扫码支付
- **到账时间**: 实时到账
- **退款时间**: 实时到账

### 6.2 支付流程

#### 6.2.1 订单创建
1. 用户填写查询信息
2. 系统验证数据（如二要素验证）
3. 创建订单并计算金额
4. 分配代理佣金（如通过代理访问）

#### 6.2.2 支付确认
1. 显示支付确认弹窗
2. 用户选择支付方式
3. 系统创建支付订单
4. 调用第三方支付接口

#### 6.2.3 支付完成
1. 用户完成支付
2. 系统接收支付回调
3. 验证支付结果
4. 更新订单状态
5. 开始数据查询

### 6.3 订单状态

| 状态 | 说明 | 用户操作 |
|------|------|----------|
| **待支付** | 订单已创建，等待支付 | 可以支付或取消 |
| **已支付** | 支付成功，等待查询 | 等待查询结果 |
| **查询中** | 正在调用API查询数据 | 等待查询完成 |
| **查询完成** | 查询成功，可查看结果 | 查看查询报告 |
| **查询失败** | 查询失败，可申请退款 | 联系客服处理 |
| **已取消** | 订单已取消 | 无需操作 |
| **已退款** | 已处理退款 | 查看退款状态 |

---

## 7. 常见问题解答

### 7.1 登录相关

**Q: 微信登录失败怎么办？**
A: 请检查是否在微信浏览器中打开，或尝试清除浏览器缓存后重新访问。

**Q: 验证码收不到怎么办？**
A: 请检查手机号是否正确，或等待1-2分钟后重试。如仍有问题请联系客服。

**Q: 忘记代理账户密码怎么办？**
A: 请联系系统管理员重置密码。

### 7.2 查询相关

**Q: 二要素验证不通过怎么办？**
A: 请检查输入的姓名和身份证号是否正确，确保格式规范无空格。

**Q: 查询失败如何处理？**
A: 系统会自动重试，如多次失败请联系客服申请退款。

**Q: 查询结果多久有效？**
A: 查询结果默认保留30天，过期后需要重新查询。

### 7.3 支付相关

**Q: 支付失败怎么办？**
A: 请检查网络连接和支付账户余额，或尝试其他支付方式。

**Q: 重复扣费怎么办？**
A: 请保存支付凭证并联系客服处理，系统会核实后退还多扣费用。

**Q: 退款多久到账？**
A: 支付宝退款实时到账，微信退款1-3个工作日到账。

### 7.4 代理相关

**Q: 如何申请成为代理？**
A: 在个人中心点击"申请代理"，填写申请信息等待审核。

**Q: 佣金如何计算？**
A: 佣金 = 客户支付金额 - 代理底价，具体比例由管理员设置。

**Q: 提现申请多久处理？**
A: 提现申请通常1-2个工作日处理，到账时间根据提现方式而定。

---

## 8. 技术支持

### 8.1 联系方式

- **客服热线**: 通过平台客服链接联系
- **技术支持**: 通过系统内投诉按钮反馈
- **工作时间**: 工作日 9:00-18:00

### 8.2 技术要求

#### 8.2.1 浏览器支持
- **推荐**: 微信浏览器（完整功能支持）
- **兼容**: Chrome 70+, Safari 12+, Firefox 65+
- **不支持**: IE浏览器

#### 8.2.2 设备要求
- **手机**: iOS 10+, Android 8+
- **电脑**: Windows 10+, macOS 10.14+
- **网络**: 4G/WiFi稳定网络连接

### 8.3 系统维护

- **维护时间**: 通常在夜间进行
- **提前通知**: 重要维护会提前公告
- **紧急维护**: 如遇紧急问题会临时维护

### 8.4 数据安全

- **数据加密**: 所有敏感数据采用AES加密存储
- **传输安全**: 全站HTTPS加密传输
- **隐私保护**: 严格遵守数据保护法规
- **备份机制**: 定期数据备份，确保数据安全

---

## 📞 结语

本使用手册涵盖了大数据查询平台的主要功能和操作流程。如果您在使用过程中遇到任何问题，请及时联系技术支持团队。我们将持续优化系统功能，为用户提供更好的服务体验。

**文档版本**: v1.0  
**更新日期**: 2024年12月  
**适用系统**: 大数据查询平台 v1.0+

---

*本手册内容如有更新，以最新版本为准。* 